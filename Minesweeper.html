<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ’£ Minesweeper</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f7f7f7;
    color: #000;
    text-align: center;
    margin: 0;
    padding: 0;
  }

  header {
    background: #333;
    color: #fff;
    padding: 15px;
    font-size: 22px;
    font-weight: bold;
  }

  .ad {
    margin: 20px auto;
    padding: 10px;
    border: 2px dashed #ccc;
    background: #eee;
    color: #666;
    font-size: 14px;
    text-align: center;
    width: 90%;
    max-width: 728px;
  }

  #game {
    display: grid;
    grid-template-columns: repeat(8, 40px);
    gap: 4px;
    justify-content: center;
    margin-top: 25px;
  }

  .cell {
    width: 40px;
    height: 40px;
    background: #ddd;
    border-radius: 6px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    font-weight: bold;
    font-size: 18px;
    user-select: none;
  }

  .cell.revealed {
    background: #fff;
    border: 1px solid #aaa;
    cursor: default;
  }

  .cell.mine {
    background: #ff5252;
    color: #fff;
  }

  .cell.flagged {
    background: #ffd54f;
  }

  #info {
    margin-top: 15px;
    font-size: 18px;
    font-weight: bold;
  }

  #resetBtn {
    margin-top: 20px;
    padding: 10px 20px;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    transition: transform 0.2s, background 0.3s;
  }

  #resetBtn:hover {
    background: #45a049;
    transform: scale(1.05);
  }
</style>
</head>
<body>
<header>ðŸ’£ Minesweeper</header>

<div class="ad">[Top Banner Ad Slot]</div>

<div id="info">Click a cell to start!</div>

<div id="game"></div>

<button id="resetBtn">Restart</button>

<div class="ad">[Bottom Banner Ad Slot]</div>

<script>
const gameContainer = document.getElementById("game");
const info = document.getElementById("info");
const resetBtn = document.getElementById("resetBtn");

const rows = 8;
const cols = 8;
const mineCount = 10;

let grid = [];
let gameOver = false;

function createGrid() {
  grid = [];
  gameContainer.innerHTML = "";
  gameOver = false;
  info.textContent = "Click a cell to start!";
  
  // Create grid with empty cells
  for (let r = 0; r < rows; r++) {
    const row = [];
    for (let c = 0; c < cols; c++) {
      const cell = document.createElement("div");
      cell.classList.add("cell");
      cell.dataset.row = r;
      cell.dataset.col = c;
      cell.addEventListener("click", revealCell);
      cell.addEventListener("contextmenu", flagCell);
      gameContainer.appendChild(cell);
      row.push({ element: cell, mine: false, revealed: false, flagged: false, number: 0 });
    }
    grid.push(row);
  }

  // Randomly place mines
  let minesPlaced = 0;
  while (minesPlaced < mineCount) {
    const r = Math.floor(Math.random() * rows);
    const c = Math.floor(Math.random() * cols);
    if (!grid[r][c].mine) {
      grid[r][c].mine = true;
      minesPlaced++;
    }
  }

  // Calculate numbers
  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      if (!grid[r][c].mine) {
        grid[r][c].number = countMinesAround(r, c);
      }
    }
  }
}

function countMinesAround(r, c) {
  let count = 0;
  for (let dr = -1; dr <= 1; dr++) {
    for (let dc = -1; dc <= 1; dc++) {
      if (dr === 0 && dc === 0) continue;
      const nr = r + dr, nc = c + dc;
      if (nr >= 0 && nr < rows && nc >= 0 && nc < cols && grid[nr][nc].mine) {
        count++;
      }
    }
  }
  return count;
}

function revealCell(e) {
  if (gameOver) return;
  const r = parseInt(this.dataset.row);
  const c = parseInt(this.dataset.col);
  const cell = grid[r][c];

  if (cell.revealed || cell.flagged) return;

  cell.revealed = true;
  cell.element.classList.add("revealed");

  if (cell.mine) {
    cell.element.classList.add("mine");
    cell.element.textContent = "ðŸ’£";
    gameOver = true;
    revealAllMines();
    info.textContent = "ðŸ’¥ Game Over!";
    return;
  }

  if (cell.number > 0) {
    cell.element.textContent = cell.number;
  } else {
    revealEmptyCells(r, c);
  }

  checkWin();
}

function revealEmptyCells(r, c) {
  for (let dr = -1; dr <= 1; dr++) {
    for (let dc = -1; dc <= 1; dc++) {
      const nr = r + dr, nc = c + dc;
      if (nr >= 0 && nr < rows && nc >= 0 && nc < cols) {
        const neighbor = grid[nr][nc];
        if (!neighbor.revealed && !neighbor.mine) {
          neighbor.revealed = true;
          neighbor.element.classList.add("revealed");
          if (neighbor.number > 0) {
            neighbor.element.textContent = neighbor.number;
          } else {
            revealEmptyCells(nr, nc);
          }
        }
      }
    }
  }
}

function flagCell(e) {
  e.preventDefault();
  if (gameOver) return;
  const r = parseInt(this.dataset.row);
  const c = parseInt(this.dataset.col);
  const cell = grid[r][c];

  if (cell.revealed) return;
  cell.flagged = !cell.flagged;
  cell.element.classList.toggle("flagged");
  cell.element.textContent = cell.flagged ? "ðŸš©" : "";
}

function revealAllMines() {
  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      const cell = grid[r][c];
      if (cell.mine) {
        cell.element.classList.add("mine");
        cell.element.textContent = "ðŸ’£";
      }
    }
  }
}

function checkWin() {
  let revealedCount = 0;
  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      if (grid[r][c].revealed) revealedCount++;
    }
  }
  if (revealedCount === rows * cols - mineCount) {
    info.textContent = "ðŸŽ‰ You Win!";
    gameOver = true;
    revealAllMines();
  }
}

resetBtn.addEventListener("click", createGrid);

createGrid();
</script>
</body>
</html>
