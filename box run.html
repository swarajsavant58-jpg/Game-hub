<!DOCTYPE html>
<html lang="en">
<head>
 
</head>
<body>
  <header>Box run </header>

  <div class="ad">[Top Banner Ad Slot]</div>

  <canvas id="gameCanvas" width="800" height="250"></canvas>

  <div class="ad">[Below Game Ad Slot]</div>

  <div id="countdown"></div>
  <div id="score">Score: 0</div>
  <div id="gameOver">ðŸ’€ Game Over!</div>
  <button id="startBtn">Start Game</button>
  <button id="restartBtn">Restart</button>

  <div class="ad">[Bottom Banner Ad Slot]</div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let dino = {
      x: 50,
      y: 200,
      width: 40,
      height: 40,
      vy: 0,
      gravity: 0.7,
      jumpPower: -12,
      isJumping: false,
      rotation: 0,
      flipDone: false
    };

    let groundY = 240;
    let obstacles = [];
    let score = 0;
    let speed = 4;
    let isAlive = true;
    let frame = 0;
    let gameStarted = false;
    let sparks = [];

    function jump() {
      if (!dino.isJumping && isAlive && gameStarted) {
        dino.vy = dino.jumpPower;
        dino.isJumping = true;
        dino.flipDone = false;

        // sparks
        for (let i = 0; i < 10; i++) {
          sparks.push({
            x: dino.x + dino.width / 2,
            y: dino.y + dino.height,
            vx: (Math.random() - 0.5) * 3,
            vy: Math.random() * -2 - 1,
            alpha: 1,
            size: Math.random() * 2 + 2
          });
        }
      }
    }

    function update() {
      if (!isAlive || !gameStarted) return;

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Dino physics
      dino.y += dino.vy;
      dino.vy += dino.gravity;

      if (dino.y >= 200) {
        dino.y = 200;
        dino.isJumping = false;
        dino.rotation = 0;
      }

      // Flip animation
      if (dino.isJumping && !dino.flipDone) {
        dino.rotation += Math.PI / 40;
        if (dino.rotation >= Math.PI) {
          dino.rotation = Math.PI;
          dino.flipDone = true;
        }
      }

      // Draw dino
      ctx.save();
      ctx.translate(dino.x + dino.width / 2, dino.y + dino.height / 2);
      ctx.rotate(dino.rotation);
      ctx.fillStyle = "#222";
      ctx.fillRect(-dino.width / 2, -dino.height / 2, dino.width, dino.height);
      ctx.restore();

      // Sparks
      for (let i = sparks.length - 1; i >= 0; i--) {
        let sp = sparks[i];
        sp.x += sp.vx;
        sp.y += sp.vy;
        sp.alpha -= 0.02;
        sp.size *= 0.95;

        ctx.fillStyle = `rgba(255, 140, 0, ${sp.alpha})`;
        ctx.beginPath();
        ctx.arc(sp.x, sp.y, sp.size, 0, Math.PI * 2);
        ctx.fill();

        if (sp.alpha <= 0) sparks.splice(i, 1);
      }

      // Obstacles
      frame++;
      if (frame % 100 === 0) {
        if (obstacles.length === 0 || obstacles[obstacles.length - 1].x < canvas.width - 200) {
          let cactusHeight = Math.random() < 0.5 ? 30 : 40;
          obstacles.push({ x: canvas.width, y: 210, width: 20, height: cactusHeight });
        }
      }

      for (let i = 0; i < obstacles.length; i++) {
        let obs = obstacles[i];
        obs.x -= speed;

        ctx.fillStyle = "green";
        ctx.fillRect(obs.x, obs.y + (40 - obs.height), obs.width, obs.height);

        // collision
        if (
          dino.x < obs.x + obs.width &&
          dino.x + dino.width > obs.x &&
          dino.y + dino.height > obs.y
        ) {
          isAlive = false;
          document.getElementById("gameOver").style.display = "block";
          document.getElementById("restartBtn").style.display = "inline-block";
        }
      }
      obstacles = obstacles.filter(obs => obs.x + obs.width > 0);

      // Ground
      ctx.fillStyle = "#aaa";
      ctx.fillRect(0, groundY, canvas.width, 10);

      // Score
      score++;
      document.getElementById("score").innerText = "Score: " + score;

      // Gradual speed-up
      if (score % 600 === 0) speed += 0.3;

      requestAnimationFrame(update);
    }

    // Controls
    document.addEventListener("keydown", e => { if (e.code === "Space") jump(); });
    document.addEventListener("touchstart", jump);

    // Countdown
    function startCountdown() {
      let countdownDiv = document.getElementById("countdown");
      let count = 3;
      countdownDiv.style.display = "block";
      countdownDiv.innerText = count;

      let interval = setInterval(() => {
        count--;
        if (count > 0) {
          countdownDiv.innerText = count;
        } else {
          countdownDiv.innerText = "Go!";
          clearInterval(interval);
          setTimeout(() => {
            countdownDiv.style.display = "none";
            gameStarted = true;
            update();
          }, 500);
        }
      }, 1000);
    }

    // Start button
    document.getElementById("startBtn").addEventListener("click", () => {
      document.getElementById("startBtn").style.display = "none";
      startCountdown();
    });

    // Restart button
    document.getElementById("restartBtn").addEventListener("click", () => location.reload());
  </script>
  <h2>About Box Run Game</h2>
  <p>
    Box Run is a fast-paced online reaction game where players must jump over obstacles
    and survive as long as possible. The game gets faster over time, testing your reflexes
    and concentration.
  </p>

  <h2>How to Play</h2>
  <ul>
    <li>Press <strong>Space</strong> or tap the screen to jump</li>
    <li>Avoid hitting obstacles</li>
    <li>Score increases the longer you survive</li>
  </ul>

  <p>
    Play Box Run for free directly in your browser. No download or login required.
    The game works smoothly on mobile, tablet, and desktop devices.
  </p>
</body>
</html>
